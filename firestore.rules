rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    
    // Règle de base pour le développement : autoriser la lecture et l'écriture
    // pour tout utilisateur authentifié sur n'importe quel document.
    // Cela couvre les opérations `get`, `list`, `create`, `update`, `delete`.
    match /{document=**} {
      allow read, write: if request.auth != null;
    }

    // Règle spécifique pour permettre aux utilisateurs non authentifiés de soumettre
    // le formulaire de contact. La règle plus générale ci-dessus s'appliquera pour les autres opérations.
    match /contact_requests/{requestId} {
      allow create: if true;
    }
    
    // Règle spécifique pour permettre aux utilisateurs non authentifiés de soumettre
    // le formulaire d'enquête.
     match /survey_responses/{responseId} {
      allow create: if true;
    }
  }
}
