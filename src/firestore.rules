
rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {
    
    // Allow public creation for forms
    match /contact_requests/{requestId} {
      allow create: if true;
    }
     match /survey_responses/{responseId} {
      allow create: if true;
    }
    
    // Pour la messagerie, n'autoriser que la lecture de documents individuels
    // et la cr√©ation, mais pas le listage de toute la collection.
    match /ecoles/{schoolId}/messagerie/{messageId} {
      allow get, write: if request.auth != null;
    }

    // Allow authenticated users to read and write to any other document.
    // This is a permissive rule for development.
    match /{document=**} {
      allow read, write: if request.auth != null;
    }
  }
}
